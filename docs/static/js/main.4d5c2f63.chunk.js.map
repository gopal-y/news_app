{"version":3,"sources":["App.js","utils/transform.js","index.js"],"names":["Home","publishers","useState","index","setIndex","subSetPublishers","setSubSet","subsetSize","Math","min","length","n","parseInt","useEffect","slice","Nav","className","onClick","max","News","news","publisher","useParams","data","filter","i","PUBLISHER","decodeURI","sort","a","b","TIMESTAMP","getTime","to","map","item","TITLE","HOSTNAME","href","URL","getDate","getMonth","getFullYear","encodeURI","App","setNews","setPublishers","init","fetch","newsDataResponse","json","tempNewsData","newsData","timestamp","Date","publishersDataSet","Set","publisherArray","Array","from","console","log","message","exact","path","element","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4d5c2f63.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport { Link, Outlet, Route, Routes, useParams } from \"react-router-dom\";\nimport { formatTimeStamp } from \"./utils/transform\";\n\nfunction Home({ publishers }) {\n  const [index, setIndex] = useState(0);\n  const [subSetPublishers, setSubSet] = useState([]);\n  let subsetSize = Math.min(30, publishers.length);\n\n  let n = parseInt(publishers.length / subsetSize);\n  if (n % subsetSize !== 0 && n > 1) {\n    n++;\n  }\n\n  useEffect(() => {\n    setSubSet(publishers.slice(index * subsetSize, (index + 1) * subsetSize));\n  }, [index, publishers, subsetSize]);\n\n  function next() {\n    setIndex(Math.min(index + 1, n - 1));\n  }\n\n  function prev() {\n    setIndex(Math.max(index - 1, 0));\n  }\n\n  return (\n    <>\n      <center>\n        <h1>Welcome to News App. Please select a channel</h1>\n      </center>\n\n      <Nav publishers={subSetPublishers} />\n      <button className=\"scroll prev\" onClick={prev}>\n        {\" \"}\n        {`<`}{\" \"}\n      </button>\n      <button className=\"scroll next\" onClick={next}>\n        {\" \"}\n        {`>`}\n      </button>\n      <Outlet />\n    </>\n  );\n}\n\nfunction News({ news }) {\n  const { publisher } = useParams();\n  const data = news\n    .filter((i) => i.PUBLISHER === decodeURI(publisher))\n    .sort((a, b) => {\n      return b.TIMESTAMP.getTime() - a.TIMESTAMP.getTime();\n    });\n\n  return (\n    <>\n      <Link to=\"/\" className=\"back\">{`ðŸ¢˜ Back`}</Link>\n      {data.length === 0 && (\n        <p>\n          There is no such Publisher or no news published by the specified\n          publisher. Please check the publisher or try again later.\n        </p>\n      )}\n      {data.length > 0 && (\n        <div className=\"table-container\">\n          <center><h1>News Published by: {publisher}</h1></center>\n          <table>\n            <thead>\n              <tr>\n                <th>Headline</th>\n                <th>Host</th>\n                <th>Source</th>\n                <th>Published On</th>\n              </tr>\n            </thead>\n            <tbody>\n              {data.map((item, i) => {\n                return (\n                  <tr key={i}>\n                    <td>{item.TITLE}</td>\n                    <td>{item.HOSTNAME}</td>\n                    <td>\n                      <a href={item.URL}>{item.URL}</a>\n                    </td>\n                    <td>{`${item.TIMESTAMP.getDate()}/${item.TIMESTAMP.getMonth()}/${item.TIMESTAMP.getFullYear()}`}</td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </>\n  );\n}\n\nfunction Nav({ publishers }) {\n  return (\n    <div className=\"button-container\">\n      {publishers.map((publisher, i) => (\n        <Link key={i} className=\"news-button\" to={encodeURI(publisher)}>\n          {publisher}\n        </Link>\n      ))}\n    </div>\n  );\n}\n\nfunction App() {\n  const [news, setNews] = useState([]);\n  const [publishers, setPublishers] = useState([]);\n\n  const init = async () => {\n    try {\n      const newsDataResponse = await fetch(\n        \"https://s3-ap-southeast-1.amazonaws.com/he-public-data/newsf6e2440.json\"\n      );\n\n      const tempNewsData = await newsDataResponse.json();\n      const newsData = tempNewsData.map((item) => {\n        return { ...item, TIMESTAMP: formatTimeStamp(item.TIMESTAMP) };\n      });\n\n      const publishersDataSet = new Set(newsData.map((item) => item.PUBLISHER));\n      const publisherArray = Array.from(publishersDataSet);\n\n      setPublishers(publisherArray.sort());\n      setNews(newsData);\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  return (\n    <>\n      <Routes>\n        <Route exact path=\"/\" element={<Home publishers={publishers} />} />\n        <Route path=\":publisher\" element={<News news={news} />} />\n      </Routes>\n    </>\n  );\n}\n\nexport default App;\n","/**{  \n      \"ID\":1,\n      \"TITLE\":\"Fed official says weak data caused by weather, should not slow taper\",\n      \"URL\":\"http://www.latimes.com/business/money/la-fi-mo-federal-reserve-plosser-stimulus-economy-20140310,0,1312750.story\\\\?track=rss\",\n      \"PUBLISHER\":\"Los Angeles Times\",\n      \"CATEGORY\":\"b\",\n      \"HOSTNAME\":\"www.latimes.com\",\n      \"TIMESTAMP\":1394470370698\n   } */\n\nexport function formatTimeStamp(timestamp) {\n    return new Date(parseInt(timestamp));\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}